<a name="topage"></a>

# 1.0.1

#### OstMain.java 

```
package ost;

import mimeType.MimeTypeDetector;

public class OstMain {

	public OstMain() {
		MimeTypeDetector mtd = new MimeTypeDetector();
		
		String pdf = "C:\\01_test\\103.pdf";
		String txt = "C:\\01_test\\101.txt";
		String result = mtd.FileTypeDetector("C:\\01_test\\103.pdf.txt");
		
		System.out.println("result ==> " + result);
	}

	public static void main(String[] args) {
		new OstMain();

	}

}
```

#### MimeTypeDetector.java

```package mimeType;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

public class MimeTypeDetector {

	public MimeTypeDetector() {
		System.out.println("Welcome...");
	}

	public String FileTypeDetector(String fileName) {
		System.out.println("Translae ==> fileName ==> " + fileName);
		
		File f = new File(fileName);
		
		if (!f.exists()) {
			System.out.println(fileName + " >> Does not Exists");
			return "Does not Exists";
		}
		
		System.out.println("fileName ==> " + fileName + " >> is exists");
		
        try {
        	///----[step 1: detect extention]---///
            String mimeType = detectMimeType(fileName);
            System.out.println("MIME type (Files.probeContentType): " + mimeType);

            ///---[step 2: read file & detect true mime type]---///
            String mimeTypeInputStream = detectMimeTypeUsingInputStream(fileName);
            System.out.println("MIME type (InputStream - basic detection): " + mimeTypeInputStream);
        } catch (IOException e) {
            e.printStackTrace();
        }
		
		return fileName + " file mime type is::: " ;
		
	}//m 
	
    public static String detectMimeType(String filePath) throws IOException {
        Path path = Paths.get(filePath);
        return Files.probeContentType(path);
    }
    
    public static String detectMimeTypeUsingInputStream(String filePath) throws IOException {
        try (BufferedInputStream bis = new BufferedInputStream(new FileInputStream(filePath))) {
            byte[] header = new byte[1024]; // Read a chunk of the file
            int bytesRead = bis.read(header);
            if (bytesRead == -1) {
                return "application/octet-stream"; // Empty file
            }

            // Simple magic number based detection (very limited).
            // For robust detection, use a library like Apache Tika.
            if (header[0] == (byte) 0xFF && header[1] == (byte) 0xD8) {
                return "image/jpeg";
            } else if (header[0] == (byte) 0x89 && header[1] == (byte) 0x50 && header[2] == (byte) 0x4E
                    && header[3] == (byte) 0x47) {
                return "image/png";
            } else if (header[0] == (byte) 0x47 && header[1] == (byte) 0x49 && header[2] == (byte) 0x46) {
                return "image/gif";
            } else if (header[0] == (byte) 0x25 && header[1] == (byte) 0x50 && header[2] == (byte) 0x44
                    && header[3] == (byte) 0x46) {
                return "application/pdf";
            } else if (header[0] == (byte) 0x50 && header[1] == (byte) 0x4B && header[2] == (byte) 0x03
                    && header[3] == (byte) 0x04) {
                return "application/zip"; // Or more specific zip types
            } else {
                // Fallback to octet-stream or try more advanced detection
                return "default >> application/octet-stream";
            }
        }
    }


} //c

```


----

<p align="right">(<a href="#topage">back to top</a>)</p>
<br/>
<br/>

